<apex:page standardStylesheets="false" sidebar="false"
           showHeader="false" applyBodyTag="false" applyHtmlTag="false"
           docType="html-5.0" controller="SPCommunityCustomer"> 



  <!--REMOTE OBJECT MODELS-->
  <apex:remoteObjects jsNamespace="RemoteObjectModel">    
    <apex:remoteObjectModel name="A2_App_Settings__c"
      fields="Name,Route_to_Old_Opp_View__c"
    />

    <apex:remoteObjectModel name="Opportunity" 
      fields="Id,OwnerId,AccountId,Name,CloseDate,StageName,Project_Stage__c,Projected_Delivery_Date__c,System_Size_KwP__c,Mounting_System__c,Commercial_Project_num__c,Commercial_Operation_Date__c,Contract_Type__c,Installation_Date__c" />
    
    <apex:remoteObjectModel name="Account"  
      fields="Id,OwnerId,Name,Industry,Key_Vertical__c,Phone,Email__c,BillingStreet,BillingCity,BillingState,BillingCountry,BillingPostalCode,Description,Lead_Qualification_Notes__c,Geolocation__c"
    >
      <apex:remoteObjectField name="Geolocation__Longitude__s" />
      <apex:remoteObjectField name="Geolocation__Latitude__s" />
    </apex:remoteObjectModel>

    <apex:remoteObjectModel name="Contact"  
      fields="Id,AccountId,Name,FirstName,LastName,Phone,MobilePhone,Email,Role__c,Primary__c,Include_in_Lease_Doc__c"
    />

    <apex:remoteObjectModel name="Quote"  
      fields="Id,Name,System_Size_kWp__c,System_Production_Year_1__c,Year_1_PPA_Price__c,Escalator__c,OpportunityId,Account__c,AccountId,ExpirationDate"
    />

    <apex:remoteObjectModel name="Note"  
      fields="Id,ParentId,Title,Body,OwnerId"
    />

    <apex:remoteObjectModel name="Attachment"
      fields="Id,ParentId,Name,ContentType"
    />
    

    <!--Commercial Specific-->
    <apex:remoteObjectModel name="Design__c"  
      fields="Id,Name,Final_Design__c,Opportunity__c,Site__c"
    />
    
    <apex:remoteObjectModel name="Site_Information_Form__c"
        fields="Id,Name,Site_Name__c,Site_Latitude_Y_coordinate__c,Site_Longitude_X_coordinate__c,Site_Address__c,Site_City__c,Site_Country__c,Site_State__c,Site_Zip_Postal_Code__c,Nominal_AC_Voltage__c,Design_Wind_Speed_Mph__c,Account__c,Opportunity_del__c"
    />


    <!--more models here as needed-->  
  </apex:remoteObjects> 
  

  <!-- THIS IS THE NAV Component-->
  <c:SPCommunityAppResources_CSS namespaceOnly="true"/>
  <c:CommunitiesMainNavComponent activeTab="Accounts" />
    
    
  <!-- To Use the NAV, you have to have this JS which contains moment.js, jQuery, and the JS for the styleguide -->
  <c:SPCommunityAppResources_JS />

  <apex:includeScript value="/soap/ajax/39.0/connection.js"/>
  <apex:includeScript value="/soap/ajax/39.0/apex.js"/>
  <script>
      sforce.connection.sessionId = '{!$Api.Session_ID}';
  </script>
  
   <script type="text/javascript">
       
    /**
      * Call a VF remote action
      * @param obj Object request data
      * @param callback Callback on response completion
      */
     function actionInvoker(obj, callback) {
        console.log('Remote action params', obj);
        /**
         * Log the response and callback
         */
        var logResponseAndCallback = function(res, env) {
            console.log('Response', res, 'Event', env);
            callback(res, env);
        };
        /**
         * Request has a payload that contains an array of parameters
         * Apply all parameters as arguments to the remote action
         */
        if (obj.payload && obj.payload.constructor === Array) {
            var allArgs = [obj.action].concat(obj.payload).concat([logResponseAndCallback, {escape: false, timeout: 120000}]);
            console.log('Remote action call is an array', allArgs, this);
            Visualforce.remoting.Manager.invokeAction.apply(Visualforce.remoting.Manager, allArgs);
        }
        /**
         * Request has a payload, but it is a scalar
         */
        else if (obj.payload) {
            Visualforce.remoting.Manager.invokeAction(obj.action, obj.payload, logResponseAndCallback, {escape: false, timeout: 120000});
        }
        /**
         * Request has no payload
         */
        else {
            Visualforce.remoting.Manager.invokeAction(obj.action, logResponseAndCallback, {escape: false, timeout: 120000});
        }
      }    
  
    </script>
    
  <!-- start Mixpanel --><script type="text/javascript">(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
mixpanel.init("{!$Label.MixPanelKey}");</script><!-- end Mixpanel -->
    
  <script src="https://use.fontawesome.com/f25bd358dc.js"></script>
    
  <base href="/apex/SPCommunityCustomer"></base>
   
  <apex:stylesheet value="{!$Resource.poc_styles_bundle_angular}"/>
    
   <app-root>
     <div class="loading-wrapper">
       <div class="loading-inner">
         <div class="loading-icon spinner spinner-small"></div>
         <span class="loading-text">Loading...</span>
       </div>
    </div>
   </app-root>
   
   <apex:includeScript value="{!$Resource.poc_full_bundle}" html-defer="true"/>
   
  <!--Footer-->
  <c:SPCommunityFooter />
</apex:page>