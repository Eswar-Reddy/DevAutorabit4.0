<apex:page standardController="Purchase_Order__c" extensions="PurchaseOrderWizardPDFController" showHeader="false" sideBar="false" renderAs="pdf">
<head> 
    <style type="text/css">  
        @page  {   
         /* Landscape orientation */    
         size:landscape;    
          }  
         body {           
          font-size:10pt;  
         } 
    </style> 
</head> 
    <apex:pageBlock title="{!$Label.POWizardPurchaseOrderTitle}">
        <apex:pageBlockSection columns="2">
            <apex:pageBlockSectionItem >
                <apex:outputLabel for="accName">{!$ObjectType.Purchase_Order__c.Fields.Dealer_Account__c.Label}</apex:outputLabel>
                <apex:outPutLink value="/{!purchaseOrder.Dealer_Account__c}" id="accName">{!purchaseOrder.Dealer_Account__r.Name}</apex:outPutLink>
            </apex:pageBlockSectionItem>
            <apex:outputField value="{!purchaseOrder.Name}" />            
            <apex:outputField value="{!purchaseOrder.SmartPack_Mounting_Type__c}" rendered="{!IF(AND(NOT(ISNULL(purchaseOrder.SunPower_Design__c)),(isEUUser || !isPartnerUser)),'true','false')}"/>          
           <!--  <apex:outputField value="{!purchaseOrder.SmartMount__c}" rendered="{!IF(AND(NOT(ISNULL(purchaseOrder.SunPower_Design__c)),(isNAUser || !isPartnerUser)),'true','false')}"/> -->
            <apex:pageBlockSectionItem rendered="{!IF(selectedOpportunity == null || isDealerResidential == true,'false','true')}">
                <apex:outputLabel for="custOpp">{!$ObjectType.Purchase_Order__c.Fields.Opportunity__c.Label}</apex:outputLabel>
                   <apex:outPutLink value="/{!selectedOpportunity.ID}" id="custOpp">{!purchaseOrder.Opportunity__r.Name}</apex:outPutLink>
            </apex:pageBlockSectionItem>            
            <apex:pageBlockSectionItem >
                <apex:outputLabel for="sysSize">{!$ObjectType.Purchase_Order__c.Fields.System_Size__c.Label}</apex:outputLabel>
                <apex:outputLabel id="sysSize">{!purchaseOrder.System_Size__c}</apex:outputLabel>
            </apex:pageBlockSectionItem>
            <apex:pageBlockSectionItem >
                <apex:outputLabel >{!$ObjectType.Purchase_Order__c.Fields.Order_Total__c.Label}</apex:outputLabel> 
                <apex:outputField id="purchaseOrderTotal" value="{!purchaseOrder.Order_Total__c}" />                    
            </apex:pageBlockSectionItem>
            <apex:pageBlockSectionItem >
                <apex:outputLabel >{!$ObjectType.Purchase_Order__c.Fields.Notes__c.Label}</apex:outputLabel>
                    {!purchaseOrder.Notes__c}
            </apex:pageBlockSectionItem>
            <apex:outPutField id="shipToCon" value="{!purchaseOrder.Ship_To_Contact__c}" rendered="{!(isNAUser || !isPartnerUser)}"/> 
            <apex:outputField value="{!purchaseOrder.Is_Taxible_Order__c}" rendered="{!(isNAUser || !isPartnerUser)}" ></apex:outputField>
            
        </apex:pageBlockSection>
        <apex:pageBlockSection columns="2" title="{!$Label.POWizardShippingInfoTitle}">
            <apex:pageBlockSectionItem >
                <apex:outputLabel >{!$Label.POWizardShipToAddress}</apex:outputLabel>
                        {!shipToSiteAddress}
                </apex:pageBlockSectionItem> 
                <apex:pageBlockSectionItem >
                    <apex:outputLabel for="specialInstr">{!$ObjectType.Purchase_Order__c.Fields.Special_Instructions__c.Label}</apex:outputLabel>
                    <apex:outputLabel id="specialInstr">{!purchaseOrder.Special_Instructions__c}</apex:outputLabel>
                </apex:pageBlockSectionItem>
                <!-- <apex:pageBlockSectionItem >
                    <apex:outputLabel >{!$ObjectType.Purchase_Order__c.Fields.Shipping_Method__c.Label}</apex:outputLabel>
                    {!purchaseOrder.Shipping_Method__c}
                </apex:pageBlockSectionItem> -->
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="{!$ObjectType.Purchase_Order__c.Fields.Requested_Delivery_Date__c.Label}" ></apex:outputLabel>
                       <apex:outputText value=" {0,date,dd-MMM-yyyy}">
	       					<apex:param value="{!purchaseOrder.Requested_Delivery_Date__c}" />
	   					</apex:outputText>
                </apex:pageBlockSectionItem>
                <apex:outputField value="{!purchaseOrder.Accept_Partial_Shipment__c}" />
                 <apex:outputField value="{!purchaseOrder.Accept_Expedited_Delivery_Charges__c}" /> 
                <apex:pageBlockSectionItem rendered="{!purchaseOrder.Accept_Expedited_Delivery_Charges__c}">
                        <apex:outputLabel >{!$ObjectType.Purchase_Order__c.Fields.Delivery_Charges__c.Label}</apex:outputLabel>
                         <!-- {!purchaseOrder.Delivery_Charges__c} -->
                        <apex:outputField value="{!purchaseOrder.Delivery_Charges__c}" />
                </apex:pageBlockSectionItem>
                <apex:outputField value="{!purchaseOrder.Shipping_Method__c}" rendered="{!isNAUser}" />
                                                                                                                         
            </apex:pageBlockSection>
            <apex:pageBlockSection columns="2" title="{!$Label.POWizardBillingInfoTitle}">
                <apex:pageBlockSectionItem >
                        <apex:outputLabel >{!$Label.POWizardBillToAddress}</apex:outputLabel>
                        {!billToSiteAddress}
                </apex:pageBlockSectionItem>                                                                                                                                                                            
            </apex:pageBlockSection>            
    </apex:pageBlock>
    <apex:pageBlock title="{!$Label.POWizardLineItemsHeading}">
                    <apex:pageBlockTable value="{!selProductItems}" var="item"> 
                        <apex:column width="10%" >
                            <apex:facet name="header">
                            {!$Label.POWizardLineNumberHeading}
                            </apex:facet>
                            {!item.lineNumber}
                        </apex:column>
                        <apex:column width="35%">
                            <apex:facet name="header">
                            {!$Label.POWizardProductNameHeading}
                            </apex:facet>
                            {!item.Name}
                        </apex:column>
                        <!-- <apex:column width="15%">
                            <apex:facet name="header">
                            Type
                            </apex:facet>
                            {!item.prodType}
                        </apex:column> -->
                        <apex:column width="10%">
                            <apex:facet name="header">
                            {!$Label.POWizardItemIDHeading}
                            </apex:facet>
                            {!item.itemID}
                        </apex:column>
                        <apex:column width="5%">
                            <apex:facet name="header">
                            {!$Label.POWizardQuantityHeading}
                            </apex:facet>
                            {!item.Qty}
                        </apex:column>
                        <apex:column rendered="{!IF(AND(item.isSmartPack==TRUE,NOT(isEUUser)),'true','false')}" width="10%">
                            <apex:facet name="header">
                            {!$Label.POWizardIsSmartPackHeading}
                            </apex:facet>
                            <img height="16" width="21" title="{!$Label.POWizardCheckedText}" class="checkImg" alt="{!$Label.POWizardCheckedText}" src="/img/checkbox_checked.gif"/>
                        </apex:column>
                        <apex:column rendered="{!IF(OR(item.isSmartPack==TRUE,isEUUser),'false','true')}" width="10%">
                            <apex:facet name="header">
                                {!$Label.POWizardIsSmartPackHeading}
                            </apex:facet>
                            <img height="16" width="21" title="{!$Label.PoWizardNotCheckedText}" class="checkImg" alt="{!$Label.PoWizardNotCheckedText}" src="/img/checkbox_unchecked.gif"/>
                        </apex:column>
                        <apex:column width="15%" style="text-align:right;white-space:nowrap" >
                            <apex:facet name="header">
                            <div style="text-align:right;">{!$Label.POWizardUnitPriceHeading}</div>
                            </apex:facet>
                            
                            <apex:outputPanel rendered="{!NOT(item.lineType == 'Credit Only')}">
                              {!purchaseOrder.CurrencyIsoCode}&nbsp;{!item.pOrderLine.Unit_Price__c}
                            </apex:outputPanel>
                            <apex:outputPanel rendered="{!item.lineType == 'Credit Only'}">
                              {!purchaseOrder.CurrencyIsoCode}&nbsp;-{!item.pOrderLine.Unit_Price__c}
                            </apex:outputPanel>
                           <!-- <apex:outputText value="{0,number,#0.00#}" style="text-align:right;align:right;">
                                <apex:param value="{!item.perUnitPrice}" /> 
                            </apex:outputText> -->
                        </apex:column>
                        <apex:column width="10%" style="text-align:right;"  rendered="{!hasDiscounts}">
                             <apex:facet name="header">
                            <div style="text-align:right;">
                            {!IF(CONTAINS($Label.POWizardDiscountPercentHeading,' '),TRIM(LEFT($Label.POWizardDiscountPercentHeading,FIND(' ',$Label.POWizardDiscountPercentHeading))),$Label.POWizardDiscountPercentHeading)}
                            <br/>
                            {!IF(CONTAINS($Label.POWizardDiscountPercentHeading,' '),RIGHT($Label.POWizardDiscountPercentHeading,LEN($Label.POWizardDiscountPercentHeading) - FIND(' ',$Label.POWizardDiscountPercentHeading)),'')}
                            </div>
                            </apex:facet>
                            {!item.discountPercent}
                        </apex:column>
                        <apex:column width="10%" style="text-align:right;"  rendered="{!hasDiscounts}">
                             <apex:facet name="header">
                             <div style="text-align:right;">
                             {!IF(CONTAINS($Label.POWizardDiscountAmountHeading,' '),TRIM(LEFT($Label.POWizardDiscountAmountHeading,FIND(' ',$Label.POWizardDiscountPercentHeading))),$Label.POWizardDiscountAmountHeading)}
                            <br/>
                            {!IF(CONTAINS($Label.POWizardDiscountAmountHeading, ' '),RIGHT($Label.POWizardDiscountAmountHeading,LEN($Label.POWizardDiscountAmountHeading) - FIND(' ',$Label.POWizardDiscountAmountHeading)),'')}
                            </div>
                            </apex:facet>
                            <apex:outputText value="{0, number, ###,###,###,##0.00}">  
      									<apex:param value="{!item.discountAmount}"/>  
 										</apex:outputText>
                        </apex:column>
                        <apex:column width="10%" style="text-align:right;" rendered="{!hasDiscounts}">
                             <apex:facet name="header">
                             <div style="text-align:right;">
                             {!IF(CONTAINS($Label.POWizardServiceFeeHeading,' '),TRIM(LEFT($Label.POWizardServiceFeeHeading,FIND(' ',$Label.POWizardServiceFeeHeading))),$Label.POWizardServiceFeeHeading)}
                            <br/>
                            {!IF(CONTAINS($Label.POWizardServiceFeeHeading,' '),RIGHT($Label.POWizardServiceFeeHeading,LEN($Label.POWizardServiceFeeHeading) - FIND(' ',$Label.POWizardServiceFeeHeading)),'')}
                            </div>
                            </apex:facet>
                            <apex:outputText value="{0, number, ###,###,###,##0.00}">  
      									<apex:param value="{!item.serviceFee}"/>  
 										</apex:outputText>
                        </apex:column>
                        <apex:column width="10%" style="text-align:right;white-space:nowrap" >
                            <apex:facet name="header">
                            <div style="text-align:right;">{!$Label.POWizardExtendedPriceHeading}</div>
                            </apex:facet>
                            
                            <apex:outputPanel rendered="{!NOT(item.lineType == 'Credit Only')}">
                              {!purchaseOrder.CurrencyIsoCode}&nbsp;{!item.pOrderLine.Price__c}
                            </apex:outputPanel>
                            <apex:outputPanel rendered="{!item.lineType == 'Credit Only'}">
                              {!purchaseOrder.CurrencyIsoCode}&nbsp;-{!item.pOrderLine.Price__c}
                            </apex:outputPanel>
                            <!-- <apex:outputText value="{0,number,#0.00#}" style="text-align:right;align:right;">
                                <apex:param value="{!item.totalPrice}" />
                            </apex:outputText> -->
                        </apex:column>
                    </apex:pageBlockTable>
                </apex:pageBlock>           
</apex:page>