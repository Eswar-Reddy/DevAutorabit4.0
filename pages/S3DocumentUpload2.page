<apex:page standardController="Document__c" extensions="S3DocumentUploadController" action="{!page2onLoad}">

 

    <form 
        action="https://{!Document__c.Bucket_Name__c}.s3.amazonaws.com"
        method="post" enctype="multipart/form-data">
        <input type="hidden"  name="key" value="{!Document__c.File_Name__c}" /> 
        <input type="hidden"  name="AWSAccessKeyId" value="{!key}" /> 
        <input type="hidden"  name="policy" value="{!policy}" /> 
        <input type="hidden"  name="signature" value="{!signedPolicy}" /> 
        <input type="hidden"  name="acl" value="{!Document__c.Access__c}" /> 
<!--    <input type="hidden" name="success_action_status" value="201">  -->
        <input type="hidden"  name="Content-Type" value="{!Document__c.Content_Type__c}" /> 
        <input type="hidden" name="success_action_redirect" value="https://{!serverURL}/{!Document__c.id}" /> <apex:pageBlock title="New S3 Document" mode="edit">
        <apex:pageBlockButtons >
            <input class="btn" type="submit" value="Upload File" />
            
            
        </apex:pageBlockButtons>

        <apex:pageBlockSection title="Local File to load" columns="1">

<!--     <apex:pageBlockSectionItem >
             <apex:outputLabel value="Storage Path" />
                <apex:outputText >
            {!S3_Document__c.Bucket_Name__c}/{!S3_Document__c.File_Name__c}
            </apex:outputText>
            </apex:pageBlockSectionItem>
-->            
            <apex:pageBlockSectionItem >

                <apex:outputLabel value="File to upload" />
                <input type="file" size="50" name="file" />
            </apex:pageBlockSectionItem>

        </apex:pageBlockSection>
    </apex:pageBlock></form>

</apex:page>