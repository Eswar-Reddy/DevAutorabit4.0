<!--
* OrderFinalConfirmation - Order Submission page for cash based ordering system
* SFDC Release - https://na29.salesforce.com/a5B34000000xp2Y
* Pivotal Tracker Updates:
* ID #114709951 - Add Contact Phone to the Order Submission Screen - 3/18/16
* ID #114738873 - Purchase Order Re-submission (SFDC) - 4/16/2016
* ID #121852503 - Remove Ok to Ship  - 6/23/2016
* ID #114921295 - Remove Shipping Method Selection - WW32
*
*
*
*
*
*
*
*
-->

<apex:page standardController="Purchase_Order__c" extensions="EMEAOrderSubmissionDetails" docType="html-5.0" title="Submission Details" cache="true">

    <script src="https://code.jquery.com/jquery-2.1.4.min.js" />
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>
    <apex:stylesheet value="{!URLFOR($Resource.NSBootstrap, '/NSBootstrap.css')}"/>


    <style>
        .row-centered {
        text-align:center;
        }
        .bs .label {
        font-size: .90em;
        }

        .bs .body {
        font-size: .90em;
        }
        .bs .form-control {
        font-size: .90em !important;
        height: 90%;
        }
        .bs .table > thead > tr > th, .bs .table > tbody > tr > th, .bs .table > tfoot > tr > th, .bs .table > thead > tr > td, .bs .table > tbody > tr > td, .bs .table > tfoot > tr > td {
        font-size: .90em;
        }
        .bPageBlock {
        border-top: 3px solid #0076be !important;
        border-radius: 0px !important;
        }
        .customnotabTab .secondaryPalette, .individualPalette .customnotabBlock .secondaryPalette {
        background-color: #ffffff !important;
        }

    </style>

    <div class="bs">
        <div class="container container-fluid" style="padding-top:1em; width: 80%">
            <apex:form >
                <apex:outputPanel id="submittedPanel" rendered="{!purchaseOrder.Order_Status__c == 'Submitted'}">
                    <div class="alert alert-info">
                        {!$Label.Order_Submission_Status}
                    </div>
                </apex:outputPanel>
                <apex:outputPanel id="errorPanel" rendered="{!purchaseOrder.Order_Status__c == 'Error'}">
                    <div class="alert alert-danger">
                        {!$Label.POWizadErrorMsgForErrorStatusPartners}<br/>
                        <apex:outputField rendered="{!currentUser.Contact.AccountId == null}" value="{!purchaseOrder.Order_Status_Interface_Message__c}"/>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel id="orderNumberPanel" rendered="{!purchaseOrder.Oracle_Order_Number__c != null}">
                    <div class="alert alert-success">
                        {!purchaseOrder.Order_Status_Interface_Message__c}
                    </div>
                </apex:outputPanel>

                <apex:outputPanel id="errorMsgs">
                    <apex:messages styleClass="alert alert-danger" />
                </apex:outputPanel>

                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h4>{!$Label.Order_Confirmation}</h4>
                    </div>

                    <div class="panel-body">
                        <h4>{!$Label.Order_Information}</h4>

                        <!--#114738873-->
                        <apex:outputPanel rendered="{!currentUser.Contact.AccountId == null && purchaseOrder.Order_Status__c == 'Error' && purchaseOrder.Accept_Terms__c}" >
                            <div class="row">
                                <div class="col-sm-12" style="margin-top: 1em;">
                                    <div class="col-sm-6">
                                        <apex:commandButton styleClass="btn btn-primary btn-sm" action="{!psrSubmitOrder}" value="{!$Label.POWizardSubmitOrderLabel}" reRender="errorMsgs" /> &nbsp;&nbsp;
                                    </div>
                                </div>
                            </div>
                        </apex:outputPanel>

                        <hr/>
                        <div class="form-horizontal">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="col-sm-6">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="form-group">
                                                    <label for="oppOutput" class="col-sm-4">{!$ObjectType.Purchase_Order__c.Fields.Dealer_Account__c.Label}</label>
                                                    <apex:outputText styleClass="col-sm-8" id="partnerNameOutput" value="{!purchaseOrder.Dealer_Account__r.Name}"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="form-group">
                                                    <label for="orderNameOutputDiv" class="col-sm-4">{!$ObjectType.Purchase_Order__c.Fields.Opportunity__c.Label}</label>
                                                    <div class="col-sm-8" id="orderNameOutputDiv">
                                                        <apex:outputField id="oppOuput" value="{!purchaseOrder.Opportunity__r.Name}"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="col-sm-6">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="form-group">
                                                    <label for="billingInfoOutput" class="col-sm-4" style="padding-top:8px;">{!$Label.POWizardBillToAddress}</label>
                                                    <div class="col-sm-8">
                                                        <apex:outputField styleClass="form-control" style="width:50%; font-size: .85em;" value="{!bts.Address1__c}"/><br/>
                                                        <apex:outputField styleClass="form-control" style="width:50%; font-size: .85em;" value="{!bts.City__c}" />,&nbsp;
                                                        <apex:outputField styleClass="form-control" style="width:50%; font-size: .85em;" value="{!bts.State__c}" />&nbsp;&nbsp;
                                                        <apex:outputField styleClass="form-control" style="width:50%; font-size: .85em;" value="{!bts.Zip__c}" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="form-group">
                                                    <label for="oppOutput" class="col-sm-4">{!$ObjectType.Purchase_Order__c.Fields.Name.Label}</label>
                                                    <apex:outputText styleClass="col-sm-8" id="orderNameOutput" value="{!purchaseOrder.Name}"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="col-sm-6">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="form-group">
                                                    <label class="col-sm-12">{!$Label.ApplicableTaxes}</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br/>

                            <h4>{!$Label.POWizardShippingInfoTitle}</h4>
                            <hr/>

                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="col-sm-6">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="form-group">
                                                    <label for="deliveryDateOutput" class="col-sm-4">{!$ObjectType.Purchase_Order__c.Fields.Requested_Delivery_Date__c.Label}</label>
                                                    <div class="col-sm-8" id="deliveryDateOutput" >
                                                        <apex:outputText value=" {0,date,dd-MMM-yyyy}">
                                                            <apex:param value="{!purchaseOrder.Requested_Delivery_Date__c}" />
                                                        </apex:outputText>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="form-group">
                                                    <label for="shipContactPhone" class="col-sm-4">{!$ObjectType.Lead.Fields.Phone.Label}</label>
                                                    <apex:outputText id="shipContactPhone" styleClass="col-sm-8" value="{!purchaseOrder.Ship_to_Contact__r.Phone}"/>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="col-sm-6">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="form-group">
                                                    <label for="shippingContactOutput" class="col-sm-4">{!$ObjectType.Purchase_Order__c.Fields.Ship_To_Contact__c.Label}</label>
                                                    <div id="shippingContactOutput" class="col-sm-8">
                                                        <apex:outputText value="{!purchaseOrder.Ship_To_Contact__r.Name}"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="form-group">
                                                    <label for="shipToAddressOutput" class="col-sm-4">{!$Label.POWizardShipToAddress}</label>
                                                    <apex:outputText id="shipToAddressOutput" styleClass="col-sm-8" value="{!sts.Address__c}"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label for="specialInstructionsDiv" class="col-sm-4">{!$ObjectType.Purchase_Order__c.Fields.Special_Instructions__c.Label}</label>
                                            <div class="col-sm-8" id="specialInstructionsDiv">
                                                <apex:outputField styleClass="form-control" id="specialInstructionsOutput" value="{!purchaseOrder.Special_Instructions__c}"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br/>

                            <br/>

                            <h4>{!$Label.POWizardLineItemsHeading}</h4>
                            <hr/>
                            <div class="row">
                                <div class="col-sm-12">
                                    <apex:dataTable value="{!orderLines}" rows="{!numLines}" var="pol" id="theTable" rowClasses="odd,even" styleClass="table" columns="2">
                                        <apex:column width="60%">
                                            <apex:facet name="header">{!$Label.Description}</apex:facet>
                                            <apex:outputText value="{!pol.Item_Description__c}"/>
                                        </apex:column>
                                        <apex:column >
                                            <apex:facet name="header">{!$Label.POWizardQuantityHeading}</apex:facet>
                                            <apex:outputText value="{!pol.Quantity__c}"/>
                                        </apex:column>
                                    </apex:dataTable>
                                </div>
                            </div>
                        </div><!--end panel-->
                    </div>
                </div>
            </apex:form>
        </div><!--end container-->
    </div>
</apex:page>